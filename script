--// =========================
local char = LocalPlayer.Character
if not char or not char:FindFirstChild("HumanoidRootPart") then return end


generateTarget()


local hrp = char.HumanoidRootPart
local hum = char:FindFirstChildOfClass("Humanoid")


flying = true
noclipEnabled = true
orbiting = false
StartButton.Text = "FLYING..."


if hum then
hum.PlatformStand = true
end


local startCF = hrp.CFrame
local targetCF = CFrame.new(currentTarget)
local startTime = tick()


local conn
conn = RunService.Heartbeat:Connect(function()
if not flying then
conn:Disconnect()
return
end


local alpha = math.clamp((tick() - startTime) / TRAVEL_TIME, 0, 1)
hrp.CFrame = startCF:Lerp(targetCF, alpha)


if alpha >= 1 then
conn:Disconnect()
flying = false
noclipEnabled = false
StartButton.Text = "ORBITING"


if hum then
hum.PlatformStand = false
hum:ChangeState(Enum.HumanoidStateType.GettingUp)
end


smoothMove(hrp, hrp.CFrame, CFrame.new(currentTarget), ARRIVAL_SMOOTH_TIME)
startOrbit(currentTarget)
end
end)
end


StartButton.MouseButton1Click:Connect(flyToPoint)
StopButton.MouseButton1Click:Connect(stopAll)


UserInputService.InputBegan:Connect(function(input, gp)
if gp then return end
if input.KeyCode == Enum.KeyCode.F and keyVerified then
FlyFrame.Visible = not FlyFrame.Visible
end
end)


print("Fly Orbit Premium Loaded Successfully")
